<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stratum Mining Connection</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.9.0/sha256.min.js"></script>
</head>
<body>
  <h1>Open Source JS Miner (Cudo Pool)</h1><br>
  <input id="u" placeholder="username"><br>
  <input id="p" placeholder="password"><br>
  <button onclick="go" id="go">Start (credentials already written can't be removed, reload to do so)</button>
  <script>
    function go() {
    
    username = document.getElementById("u").value;
    password = document.getElementById("p").value;
    
    const socket = new WebSocket('ws://stratum.cudopool.com:30000');

    socket.onopen = () => {
      console.log('Connected to the pool');

      const subscribeMessage = {
        id: 1,
        method: "mining.subscribe",
        params: ["miner"]
      };
      socket.send(JSON.stringify(subscribeMessage));
      console.log('Sent subscription request:', subscribeMessage);
    };

    socket.onmessage = (event) => {
      const message = JSON.parse(event.data);
      console.log('Received:', message);

      if (message.result && message.result.length > 0) {
        // Handle subscription result and authorization
        const subscribeResult = message.result[0];
        console.log('Subscription Result:', subscribeResult);

        // Example: Send mining authorize (this will normally require your pool username and password)
        const authorizeMessage = {
          id: 2,
          method: "mining.authorize",
          params: ["your_username", "x"] // Replace with actual pool credentials
        };
        socket.send(JSON.stringify(authorizeMessage));
        console.log('Sent authorization request:', authorizeMessage);
      }
    };

    socket.onclose = () => {
      console.log('Disconnected from the pool');
    };

    socket.onerror = (error) => {
      console.error('WebSocket Error:', error);
    };

    }

    //thx chatgpt
  </script>
</body>
</html>
